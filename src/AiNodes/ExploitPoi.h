//
// Created by etien on 02/02/2022.
//

#ifndef HALITESUPERSMARTBOT_EXPLOITPOI_H
#define HALITESUPERSMARTBOT_EXPLOITPOI_H


#include "src/BehaviourTree.h"
#include "src/PointOfInterest.h"
#include "src/ActionNodes.h"


class GoToPoi : public bt::Sequencer {
    hlt::EntityId mShipID;
    PointOfInterest* mpPoi;

public:
    GoToPoi(int mShipId, PointOfInterest *mpPoi);
    BT_GETNAME_OVERRIDE

    hlt::EntityId GetShipId() const;
    PointOfInterest *GetPoi() const;
};


class MoveTowardPositionOnce : public bt::Sequencer {

    hlt::EntityId mShipID;

public:
    bool mReached = false;

    MoveTowardPositionOnce(int mShipId, hlt::Position mpPoi);
    BT_GETNAME_OVERRIDE

};


class MoveToBestCell : public bt::Sequencer {
    hlt::EntityId mShipID;
    hlt::Position mTargetCell;
    PointOfInterest* mpPoi;
public:
    explicit MoveToBestCell(int mShipId);
    BT_GETNAME_OVERRIDE
};


class GatherHalite : public bt::Selector {
    hlt::EntityId mShipID;
    hlt::Position mClosestDropoff;

    // State inside node
    enum {
        Gather,
        GoToDropoff,
        BecomeDropoff,
    } mState = Gather;

public:
    GatherHalite(int mShipId);
    BT_GETNAME_OVERRIDE
};


class ExploitPoi : public bt::Selector {

public:
    ExploitPoi(int mShipId, PointOfInterest *mpPoi);
    BT_GETNAME_OVERRIDE

};

class ExploitPosition : public bt::Selector {

public:
    hlt::Position mPositionToExploit;

    ExploitPosition(int mShipId, hlt::Position position);
    BT_GETNAME_OVERRIDE

};


#endif //HALITESUPERSMARTBOT_EXPLOITPOI_H
